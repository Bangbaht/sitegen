#!/usr/bin/env node

import path                   from 'path';
import program                from 'commander';
import rimraf                 from 'rimraf';
import pkg                    from '../../package.json';
import configureFromDirectory from '../configureFromDirectory';

program
  .version(pkg.version)
  .usage('sitegen-build [options] <site>')
  .description('Remove site output directory')
  .option('-o, --output <directory>', 'output directory', 'output')
  .parse(process.argv);

let cwd = process.cwd();
let site = path.join(cwd, program.args[0] || '.');
let output = path.join(site, program.output);

let config = configureFromDirectory(site, {
  output: program.output
});

rimraf.sync(config.sitegen.output);
